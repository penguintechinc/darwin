---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: project-template-prod

namespace: project-template-prod

namePrefix: prod-

commonLabels:
  environment: production

bases:
- ../../base

replicas:
- name: flask-backend
  count: 3
- name: webui
  count: 2

configMapGenerator:
- name: project-template-config
  behavior: merge
  literals:
  - LOG_LEVEL=WARN
  - RELEASE_MODE=true
  - AI_ENABLED=true
  - DEFAULT_AI_PROVIDER=ollama
  - OLLAMA_BASE_URL=http://localhost:11434
  - OLLAMA_SECURITY_LLM=granite-code:34b
  - OLLAMA_BEST_PRACTICES_LLM=llama3.3:70b
  - OLLAMA_FRAMEWORK_LLM=codestral:22b
  - OLLAMA_IAC_LLM=granite-code:20b
  - OLLAMA_FALLBACK_LLM=starcoder2:15b
  - OLLAMA_DEFAULT_LLM=granite-code:20b
  - REVIEW_SECURITY_ENABLED=true
  - REVIEW_BEST_PRACTICES_ENABLED=true
  - REVIEW_FRAMEWORK_ENABLED=true
  - REVIEW_IAC_ENABLED=true
  - MAX_FILES_PER_REVIEW=50
  - MAX_LINES_PER_FILE=1000
  - REVIEW_TIMEOUT_SECONDS=300

secretGenerator:
- name: project-template-secrets
  behavior: merge
  literals:
  - DB_USER=produser
  - DB_PASS=prodpass
  - SECRET_KEY=prodsecretkey
  - SECURITY_PASSWORD_SALT=prodsalt
  - LICENSE_KEY=PENG-PROD-XXXX-XXXX-XXXX-ABCD
  - REDIS_PASSWORD=prodredis
