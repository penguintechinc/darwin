# Beta environment overrides (dal2 cluster)
# WebUI specific configuration for beta environment

replicaCount: 2

image:
  registry: registry-dal2.penguintech.io
  pullPolicy: Always
  tag: beta

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 5
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 75m
    memory: 128Mi

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  hosts:
    - host: darwin.penguintech.cloud
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: darwin-tls
      hosts:
        - darwin.penguintech.cloud

configMapData:
  api-url: "http://flask-backend"
  api-version: "v1"
  theme: "gold"
  license-server-url: "https://license.penguintech.io"
  release-mode: "false"

env:
  - name: NODE_ENV
    value: "production"
  - name: PORT
    value: "3000"
  - name: REACT_APP_API_URL
    valueFrom:
      configMapKeyRef:
        name: webui-config
        key: api-url
  - name: REACT_APP_API_VERSION
    valueFrom:
      configMapKeyRef:
        name: webui-config
        key: api-version
  - name: REACT_APP_THEME
    valueFrom:
      configMapKeyRef:
        name: webui-config
        key: theme
  - name: LICENSE_SERVER_URL
    valueFrom:
      configMapKeyRef:
        name: webui-config
        key: license-server-url
  - name: RELEASE_MODE
    valueFrom:
      configMapKeyRef:
        name: webui-config
        key: release-mode
